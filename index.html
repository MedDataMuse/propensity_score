<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comprendre le Score de Propension</title>
    <!-- Chargement de Tailwind CSS pour un style moderne et réactif -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chargement de Chart.js pour les graphiques -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Définition de la police Inter pour une meilleure lisibilité */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7fafc; /* Couleur de fond légère */
        }
        canvas {
            width: 100% !important;
            height: auto !important;
        }
    </style>
</head>
<body class="antialiased text-gray-800">

    <!-- En-tête de la page -->
    <header class="bg-indigo-600 text-white p-6 md:p-8 rounded-b-3xl shadow-lg">
        <div class="container mx-auto px-4">
            <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold text-center">Le Score de Propension</h1>
            <p class="mt-2 text-center text-indigo-200 text-lg md:text-xl">Une explication simple et claire</p>
        </div>
    </header>

    <main class="container mx-auto mt-8 md:mt-12 px-4 space-y-12">
        
        <!-- Section Introduction -->
        <section class="bg-white p-6 md:p-8 rounded-2xl shadow-xl border border-gray-200">
            <h2 class="text-2xl md:text-3xl font-semibold text-indigo-700 mb-4 border-b pb-2">Qu'est-ce que c'est ?</h2>
            <p class="text-lg leading-relaxed">
                Le <strong>score de propension</strong> (ou <em>propensity score</em> en anglais) est un outil statistique utilisé pour mieux comprendre les résultats d'une intervention ou d'un traitement. Imaginez que vous voulez savoir si un nouveau programme de tutorat améliore les notes des élèves. Il y a un problème : les élèves qui s'inscrivent au programme sont peut-être déjà plus motivés. Comment séparer l'effet du programme de l'effet de leur motivation ? C'est là qu'intervient le score de propension.
            </p>
        </section>

        <!-- Section Visualiser le concept -->
        <section class="bg-white p-6 md:p-8 rounded-2xl shadow-xl border border-gray-200">
            <h2 class="text-2xl md:text-3xl font-semibold text-indigo-700 mb-4 border-b pb-2">Visualiser le concept</h2>
            
            <!-- Graphique 1 : Illustration du problème (biais de sélection) -->
            <div class="mb-8">
                <h3 class="text-xl font-medium text-gray-700 mb-2">1. Le problème : Biais de sélection</h3>
                <p class="text-lg leading-relaxed mb-4">
                    Ce graphique montre un groupe de contrôle (élèves non inscrits) et un groupe de traitement (élèves inscrits au programme). Notez que le groupe de traitement a déjà de meilleures notes initiales. Si l'on compare simplement les notes finales, on ne saura pas si l'amélioration est due au programme ou à leur niveau de départ plus élevé.
                </p>
                <div class="bg-gray-50 p-4 rounded-xl shadow-inner">
                    <canvas id="biasChart"></canvas>
                </div>
            </div>

            <!-- Graphique 2 : Illustration de la solution (scores de propension) -->
            <div>
                <h3 class="text-xl font-medium text-gray-700 mb-2">2. La solution : Scores de propension</h3>
                <p class="text-lg leading-relaxed mb-4">
                    Ici, nous calculons un "score de ressemblance" (le score de propension) pour chaque élève. Le graphique montre la distribution de ces scores. Le but est d'apparier les élèves du groupe de traitement avec des élèves du groupe de contrôle ayant un score similaire (la zone de chevauchement). Cela crée des groupes comparables pour une analyse plus juste.
                </p>
                <div class="bg-gray-50 p-4 rounded-xl shadow-inner">
                    <canvas id="propensityChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Section Comment ça marche ? -->
        <section class="bg-white p-6 md:p-8 rounded-2xl shadow-xl border border-gray-200">
            <h2 class="text-2xl md:text-3xl font-semibold text-indigo-700 mb-4 border-b pb-2">Comment ça marche ?</h2>
            <p class="text-lg leading-relaxed space-y-4">
                La méthode se déroule en quelques étapes clés :
            </p>
            <ol class="list-decimal list-inside text-lg leading-relaxed mt-4 space-y-2">
                <li>
                    <strong>Calcul du score :</strong> On utilise un modèle statistique (souvent une régression logistique) pour prédire la probabilité qu'un individu reçoive le traitement. Cette probabilité est le score de propension.
                </li>
                <li>
                    <strong>Appariement :</strong> On apparente ensuite les individus du groupe traité avec des individus du groupe de contrôle qui ont un score de propension très proche.
                </li>
                <li>
                    <strong>Analyse :</strong> Une fois les groupes appariés, on peut comparer les résultats (par exemple, les notes finales) entre les deux groupes, en étant plus confiant que la différence observée est bien due au traitement et non à d'autres facteurs.
                </li>
            </ol>
        </section>
        
        <!-- Section Pourquoi l'utiliser ? -->
        <section class="bg-white p-6 md:p-8 rounded-2xl shadow-xl border border-gray-200">
            <h2 class="text-2xl md:text-3xl font-semibold text-indigo-700 mb-4 border-b pb-2">Pourquoi est-ce utile ?</h2>
            <ul class="list-disc list-inside text-lg leading-relaxed space-y-2">
                <li>
                    <strong>Réduction des biais :</strong> Il permet de corriger les biais de sélection inhérents aux études non randomisées.
                </li>
                <li>
                    <strong>Flexibilité :</strong> C'est une méthode très flexible qui peut être utilisée dans de nombreux domaines, de la médecine à l'économie, en passant par le marketing.
                </li>
                <li>
                    <strong>Alternative aux essais randomisés :</strong> Lorsque les essais randomisés ne sont pas possibles (pour des raisons éthiques, de coût ou de faisabilité), le score de propension est une excellente alternative pour évaluer un effet causal.
                </li>
            </ul>
        </section>

    </main>

    <!-- Pied de page -->
    <footer class="mt-12 bg-indigo-600 text-white p-6 text-center rounded-t-3xl shadow-lg">
        <p class="text-lg">© 2024. Explication simple du score de propension.</p>
    </footer>

    <!-- Script pour les graphiques Chart.js -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Création des données pour le premier graphique (Biais de sélection)
            const biasData = {
                datasets: [{
                    label: 'Groupe de Contrôle (Non-traité)',
                    data: generateScatterData(0.5, 0.6, 20),
                    backgroundColor: 'rgba(59, 130, 246, 0.6)',
                    borderColor: 'rgb(59, 130, 246)',
                    pointRadius: 5,
                }, {
                    label: 'Groupe de Traitement (Traité)',
                    data: generateScatterData(0.7, 0.9, 20),
                    backgroundColor: 'rgba(99, 102, 241, 0.6)',
                    borderColor: 'rgb(99, 102, 241)',
                    pointRadius: 5,
                }]
            };

            // Configuration du premier graphique
            const biasConfig = {
                type: 'scatter',
                data: biasData,
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'Score Initial vs Score Final'
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Score Initial (caractéristique observée)'
                            },
                            min: 0,
                            max: 1
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Score Final (résultat)'
                            },
                            min: 0,
                            max: 1
                        }
                    }
                }
            };
            
            // Fonction pour générer des données de nuage de points
            function generateScatterData(minX, maxX, count) {
                const data = [];
                for (let i = 0; i < count; i++) {
                    const x = Math.random() * (maxX - minX) + minX;
                    const y = x * 0.5 + Math.random() * 0.4; // Simule un résultat plus élevé pour un score initial plus élevé
                    data.push({ x: x, y: y });
                }
                return data;
            }

            // Création du premier graphique
            new Chart(
                document.getElementById('biasChart'),
                biasConfig
            );

            // Création des données pour le deuxième graphique (Scores de propension)
            const propensityData = {
                labels: ['0.0-0.1', '0.1-0.2', '0.2-0.3', '0.3-0.4', '0.4-0.5', '0.5-0.6', '0.6-0.7', '0.7-0.8', '0.8-0.9', '0.9-1.0'],
                datasets: [{
                    label: 'Groupe de Contrôle',
                    data: [2, 5, 10, 15, 25, 20, 10, 3, 1, 0],
                    backgroundColor: 'rgba(59, 130, 246, 0.6)',
                    borderColor: 'rgb(59, 130, 246)',
                    borderWidth: 1
                }, {
                    label: 'Groupe de Traitement',
                    data: [0, 1, 3, 5, 15, 25, 20, 10, 5, 1],
                    backgroundColor: 'rgba(99, 102, 241, 0.6)',
                    borderColor: 'rgb(99, 102, 241)',
                    borderWidth: 1
                }]
            };

            // Configuration du deuxième graphique
            const propensityConfig = {
                type: 'bar',
                data: propensityData,
                options: {
                    responsive: true,
                    scales: {
                        x: {
                            stacked: true,
                            title: {
                                display: true,
                                text: 'Score de Propension (bins)'
                            }
                        },
                        y: {
                            stacked: true,
                            title: {
                                display: true,
                                text: 'Nombre d\'individus'
                            }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'Distribution des Scores de Propension'
                        }
                    }
                }
            };

            // Création du deuxième graphique
            new Chart(
                document.getElementById('propensityChart'),
                propensityConfig
            );
        });
    </script>

</body>
</html>


